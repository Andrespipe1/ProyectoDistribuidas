{% extends 'base.html' %}
{% block title %}Registrar producto | Inventario{% endblock %}
{% block content %}
<div class="row justify-content-center align-items-center" style="min-height: 70vh;">
  <div class="col-md-7 col-lg-6">
    <div class="card shadow-lg">
      <div class="gradient-header text-center">
        <h2 class="fw-bold mb-0"><i class="bi bi-plus-circle me-2"></i>Registrar producto</h2>
      </div>
      <div class="card-body p-4">
        <form method="POST" autocomplete="off">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="name" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="name" name="name" required>
            </div>
            <div class="col-md-6">
              <label for="code" class="form-label">Código</label>
              <input type="text" class="form-control" id="code" name="code" required>
            </div>
            <div class="col-12">
              <label for="description" class="form-label">Descripción</label>
              <textarea class="form-control" id="description" name="description" rows="2"></textarea>
            </div>
            <div class="col-md-6">
              <label for="unit" class="form-label">Cantidad</label>
              <input type="number" min="0" class="form-control" id="unit" name="unit" required>
            </div>
            <div class="col-md-6">
              <label for="category" class="form-label">Categoría</label>
              <select class="form-select" id="category" name="category" required onchange="mostrarOtraCategoria(this)">
                {% for cat in categories %}
                  <option value="{{ cat }}">{{ cat }}</option>
                {% endfor %}
                <option value="Otra...">Otra...</option>
              </select>
              <input type="text" class="form-control mt-2 d-none" id="other_category" name="other_category" placeholder="Escribe la nueva categoría">
            </div>
          </div>
          <div class="d-grid gap-2 mt-4">
            <button type="submit" class="btn btn-primary btn-lg"><i class="bi bi-check-circle"></i> Registrar</button>
            <a href="/inventory" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Volver al inventario</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script>
function mostrarOtraCategoria(sel) {
  var otra = document.getElementById('other_category');
  if(sel.value === 'Otra...') {
    otra.classList.remove('d-none');
    otra.required = true;
  } else {
    otra.classList.add('d-none');
    otra.required = false;
  }
}
</script>
{% endblock %} 